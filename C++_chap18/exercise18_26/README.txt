original is the original code given from this question.
after is the code I revised so it compile and run smoothly.

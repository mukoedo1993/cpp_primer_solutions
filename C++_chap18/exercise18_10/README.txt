first part: the version that handles the error:
https://github.com/mukoedo1993/All_files/tree/master/C%2B%2B_chap18/sec18_1_5_exception_class_hierachies
second part:
See exercise18_10.cpp here.

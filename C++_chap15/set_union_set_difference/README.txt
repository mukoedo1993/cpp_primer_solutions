I will use set_union in AndQuery, set_difference in NoQuery and set_intersection in AndQuery.
STL is wonderful.
